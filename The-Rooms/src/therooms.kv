#:kivy 1.8.0

<Back>:
	canvas:
		Rectangle:
			pos: self.x, self.y
			size: self.width, self.height
			texture: self.TEXTURE

<Door>:
	canvas:
		Rectangle:
			pos: self.x, self.y
			size: self.xUnit, self.yUnit
			texture: self.curr_texture

<Lamp>:
	canvas:
		Rectangle:
			pos: self.x, self.y
			size: self.xUnit, self.yUnit
			texture: self.curr_texture

<Menu>:
	canvas:
		Color:
			rgba: 0, 0, 0, .75
		
		Rectangle:
			pos: 0, 0
			size: self.width, self.height

	Button:
		background_color: 1, 1, 1, 0
		x: 6
		y: root.height - root.height / 10
		font_size: root.fontSize * 0.4
		on_press: root.edit_name()
		size: root.width / 2, root.height / 10
		text: 'Hi, ' + root.name + '!'
		text_size: self.size
		shorten: True

	Label:
		center_x: root.centerX
		center_y: root.height * 3 / 4
		font_size: root.fontSize
		text: 'The Rooms'

	Button:
		center_x: root.centerX
		center_y: root.centerY
		font_size: root.fontSize * 0.8
		on_press: root.play()
		size: root.width, root.height / 8
		text: 'PLAY'
	
	Label:
		center_x: root.width - root.width / 5
		center_y: root.height - root.height / 10
		font_size: root.fontSize * .4
		size: root.width / 3, root.height / 10
		text: 'Best: ' + str(root.time) + 's'
		text_size: self.size
		shorten: True

<Navigator>:
	canvas.before:
		PushMatrix:
		Rotate:
			angle: self.angle
			origin: self.x + self.xUnit / 2, self.y + self.yUnit / 2

	canvas:
		Rectangle:
			pos: self.x, self.y
			size: self.xUnit, self.yUnit
			texture: self.curr_texture
	
	canvas.after:
		PopMatrix:

<Plant>:
	canvas:
		Rectangle:
			pos: self.x, self.y
			size: self.width, self.height
			texture: self.TEXTURE

<Room>:
	nBomb: lbl_nbomb.__self__
	gameTime: lbl_time.__self__

	navi: navi_arrow.__self__
	
	back: back_arrow.__self__

	leftDoor: left_door.__self__
	centerDoor: center_door.__self__
	rightDoor: right_door.__self__

	leftLamp: left_lamp.__self__
	centerLamp: center_lamp.__self__
	rightLamp: right_lamp.__self__
	
	plant: plant.__self__

	pause: btn_pause.__self__

	canvas:
		Rectangle:
			pos: self.X, self.Y
			size: self.width, self.height
			texture: self.TEXTURE

	Label:
		id: lbl_nbomb
		center_x: root.center_x
		center_y: root.height - root.height / 16
		font_size: root.fontSize
		text: str(root.n_bomb)

	Button:
		id: btn_pause
		background_color: 1, 1, 1, .75
		y: root.height - root.height / 12
		font_size: root.fontSize * 0.5
		size: root.width / 6, root.height / 12
		text: 'Menu'
		on_press: root.stop_game(self)
	
	Label:
		id: lbl_time
		pos: root.width / 12, - root.height / 24
		font_size: root.fontSize * 0.5
		text: str(root.time_elapsed) + 's'

	Door:
		id: left_door
	
	Door:
		id: center_door
	
	Door:
		id: right_door

	Lamp:
		id: left_lamp

	Lamp:
		id: center_lamp
	
	Lamp:
		id: right_lamp
	
	Back:
		id: back_arrow
	
	Navigator:
		id: navi_arrow
	
	Plant:
		id: plant

<TheRoomsGame>:
	menu: menu.__self__
	room: room.__self__

	Room:
		id: room

	Menu:
		id: menu
